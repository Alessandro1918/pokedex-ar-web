import { Screen } from "../components/frame/screen"
import { ChartBar } from "./chart"

export default async function Stats() {

  // const data = [
  //   { index: "1", count: 222 },
  //   { index: "2", count: 97 },
  //   { index: "3", count: 167 },
  //   { index: "4", count: 242 },
  //   { index: "5", count: 373 },
  //   { index: "6", count: 301 },
  //   { index: "7", count: 222 },
  //   { index: "8", count: 97 },
  //   { index: "9", count: 167 },
  //   { index: "10", count: 242 },
  //   { index: "11", count: 222 },
  //   { index: "12", count: 97 },
  //   { index: "13", count: 167 },
  //   { index: "14", count: 242 },
  //   { index: "15", count: 373 },
  //   { index: "16", count: 301 },
  //   { index: "17", count: 222 },
  //   { index: "18", count: 97 },
  //   { index: "19", count: 167 },
  //   { index: "20", count: 242 },
  //   { index: "21", count: 222 },
  //   { index: "22", count: 97 },
  //   { index: "23", count: 167 },
  //   { index: "24", count: 242 },
  //   { index: "25", count: 373 },
  //   { index: "26", count: 301 },
  //   { index: "27", count: 222 },
  //   { index: "28", count: 97 },
  //   { index: "29", count: 167 },
  //   { index: "30", count: 242 },
  //   { index: "31", count: 222 },
  //   { index: "32", count: 97 },
  //   { index: "33", count: 167 },
  //   { index: "34", count: 242 },
  //   { index: "35", count: 373 },
  //   { index: "36", count: 301 },
  //   { index: "37", count: 222 },
  //   { index: "38", count: 97 },
  //   { index: "39", count: 167 },
  //   { index: "40", count: 242 },
  //   { index: "41", count: 222 },
  //   { index: "42", count: 97 },
  //   { index: "43", count: 167 },
  //   { index: "44", count: 242 },
  //   { index: "45", count: 373 },
  //   { index: "46", count: 301 },
  //   { index: "47", count: 222 },
  //   { index: "48", count: 97 },
  //   { index: "49", count: 167 },
  //   { index: "50", count: 242 },
  //   { index: "51", count: 222 },
  //   { index: "52", count: 97 },
  //   { index: "53", count: 167 },
  //   { index: "54", count: 242 },
  //   { index: "55", count: 373 },
  //   { index: "56", count: 301 },
  //   { index: "57", count: 222 },
  //   { index: "58", count: 97 },
  //   { index: "59", count: 167 },
  //   { index: "60", count: 242 },
  //   { index: "61", count: 222 },
  //   { index: "62", count: 97 },
  //   { index: "63", count: 167 },
  //   { index: "64", count: 242 },
  //   { index: "65", count: 373 },
  //   { index: "66", count: 301 },
  //   { index: "67", count: 222 },
  //   { index: "68", count: 97 },
  //   { index: "69", count: 167 },
  //   { index: "70", count: 242 },
  //   { index: "71", count: 222 },
  //   { index: "72", count: 97 },
  //   { index: "73", count: 167 },
  //   { index: "74", count: 242 },
  //   { index: "75", count: 373 },
  //   { index: "76", count: 301 },
  //   { index: "77", count: 222 },
  //   { index: "78", count: 97 },
  //   { index: "79", count: 167 },
  //   { index: "80", count: 242 },
  //   { index: "81", count: 222 },
  //   { index: "82", count: 97 },
  //   { index: "83", count: 167 },
  //   { index: "84", count: 242 },
  //   { index: "85", count: 373 },
  //   { index: "86", count: 301 },
  //   { index: "87", count: 222 },
  //   { index: "88", count: 97 },
  //   { index: "89", count: 167 },
  //   { index: "90", count: 242 },
  //   { index: "91", count: 222 },
  //   { index: "92", count: 97 },
  //   { index: "93", count: 167 },
  //   { index: "94", count: 242 },
  //   { index: "95", count: 373 },
  //   { index: "96", count: 301 },
  //   { index: "97", count: 222 },
  //   { index: "98", count: 97 },
  //   { index: "99", count: 167 },
  //   { index: "100", count: 242 },
  //   { index: "101", count: 222 },
  //   { index: "102", count: 97 },
  //   { index: "103", count: 167 },
  //   { index: "104", count: 242 },
  //   { index: "105", count: 373 },
  //   { index: "106", count: 301 },
  //   { index: "107", count: 222 },
  //   { index: "108", count: 97 },
  //   { index: "109", count: 167 },
  //   { index: "110", count: 242 },
  //   { index: "111", count: 222 },
  //   { index: "112", count: 97 },
  //   { index: "113", count: 167 },
  //   { index: "114", count: 242 },
  //   { index: "115", count: 373 },
  //   { index: "116", count: 301 },
  //   { index: "117", count: 222 },
  //   { index: "118", count: 97 },
  //   { index: "119", count: 167 },
  //   { index: "120", count: 242 },
  //   { index: "121", count: 222 },
  //   { index: "122", count: 97 },
  //   { index: "123", count: 167 },
  //   { index: "124", count: 242 },
  //   { index: "125", count: 373 },
  //   { index: "126", count: 301 },
  //   { index: "127", count: 222 },
  //   { index: "128", count: 97 },
  //   { index: "129", count: 167 },
  //   { index: "130", count: 242 },
  //   { index: "131", count: 222 },
  //   { index: "132", count: 97 },
  //   { index: "133", count: 167 },
  //   { index: "134", count: 242 },
  //   { index: "135", count: 373 },
  //   { index: "136", count: 301 },
  //   { index: "137", count: 222 },
  //   { index: "138", count: 97 },
  //   { index: "139", count: 167 },
  //   { index: "140", count: 242 },
  //   { index: "141", count: 222 },
  //   { index: "142", count: 97 },
  //   { index: "143", count: 167 },
  //   { index: "144", count: 242 },
  //   { index: "145", count: 373 },
  //   { index: "146", count: 301 },
  //   { index: "147", count: 222 },
  //   { index: "148", count: 97 },
  //   { index: "149", count: 167 },
  //   { index: "150", count: 242 },
  //   { index: "151", count: 222 },
  //   { index: "152", count: 97 },
  //   { index: "153", count: 167 },
  //   { index: "154", count: 242 },
  //   // { index: "155", count: 373 },
  //   // { index: "156", count: 301 },
  //   // { index: "157", count: 222 },
  //   // { index: "158", count: 97 },
  //   // { index: "159", count: 167 },
  //   // { index: "160", count: 242 },
  //   // { index: "161", count: 222 },
  //   // { index: "162", count: 97 },
  //   // { index: "163", count: 167 },
  //   // { index: "164", count: 242 },
  //   // { index: "165", count: 373 },
  //   // { index: "166", count: 301 },
  //   // { index: "167", count: 222 },
  //   // { index: "168", count: 97 },
  //   // { index: "169", count: 167 },
  //   // { index: "170", count: 242 },
  //   // { index: "171", count: 222 },
  //   // { index: "172", count: 97 },
  //   // { index: "173", count: 167 },
  //   // { index: "174", count: 242 },
  //   // { index: "175", count: 373 },
  //   // { index: "176", count: 301 },
  //   // { index: "177", count: 222 },
  //   // { index: "178", count: 97 },
  //   // { index: "179", count: 167 },
  //   // { index: "180", count: 242 },
  //   // { index: "181", count: 222 },
  //   // { index: "182", count: 97 },
  //   // { index: "183", count: 167 },
  //   // { index: "184", count: 242 },
  //   // { index: "185", count: 373 },
  //   // { index: "186", count: 301 },
  //   // { index: "187", count: 222 },
  //   // { index: "188", count: 97 },
  //   // { index: "189", count: 167 },
  //   // { index: "190", count: 242 },
  //   // { index: "191", count: 222 },
  //   // { index: "192", count: 97 },
  //   // { index: "193", count: 167 },
  //   // { index: "194", count: 242 },
  //   // { index: "195", count: 373 },
  //   // { index: "196", count: 301 },
  //   // { index: "197", count: 222 },
  //   // { index: "198", count: 97 },
  //   // { index: "199", count: 167 },
  //   // { index: "200", count: 242 },
  // ]
  const response = await fetch(
    `${process.env.NEXT_PUBLIC_BACK_URL}/api/v1/encounters`,
    {
      next: {
        revalidate: 60 * 60 // sec * 60s/min = 1h. Obs: cache will not work on dev mode. Run with "npm run build && npm run start" 
      },
    }
  )
  const data = await response.json()
  const formatted = data.map((e: any) => { return ({index: String(e.index), count: e.count}) })

  return (
    <div className="pb-6 flex h-screen w-full mx-auto max-w-full sm:max-w-sm md:max-w-md lg:max-w-lg rounded-2xl bg-gradient-to-r from-red-600 via-red-400 to-red-600 border-2 border-red-800">
      <Screen>
        <div className="p-2 flex flex-col h-full w-full gap-4 overflow-auto border-2 border-blue-800">
          <span className="text-4xl font-semibold text-blue-100">
            Encounters
          </span>
          <ChartBar data={formatted}/>
        </div>
      </Screen>
    </div>
  )
}